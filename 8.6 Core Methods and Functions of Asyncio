8.6 Core Methods and Functions of Asyncio

Функция run()

Функция asyncio.run(main()) - создает новый цикл событий и запускает в нем переданную сопрограмму,
после выполнения всех сопрограмм закрывает цикл событий. Функция run()  не может быть вызвана дважды
в одном потоке. Эта функция служит основной точкой входа и выхода из цикла событий, при написании
парсеров мы будем запускать ее только один раз.

Код ниже является элементарным использованием асинхронного кода с использованием асинхронной
функции asyncio.sleep(). В коде ниже функция run() создает цикл событий в момент своего вызова, в нее
мы передаем сопрограмму one(), которая первым делом напечатает hello, после чего асинхронно уснет
на одну секунду, имитируя выполнение чего-то очень важного в этом месте. Засыпая, она отдает управление
другому awaitable-объекту, а именно сопрограмме two(), которая напечатает нам слово world, после
этого снова вернет управление в сопрограмму one(), в которой остался последний шаг - напечатать слово 
end! После выполнения всех шагов run() закроет цикл событий до следующего запуска кода.

import asyncio

async def two():
  print('world')

async def one():
  print('hello')
  await asyncio.sleep(1)
  await two()
  print('end!')

asyncio.run(one())

#Результат
  hello  
  world
  end!
