8.9 aiofile

Aiofiles введение

Установка
pip install aiofiles
Импорт
import aiofiles

Aiofiles(документация - https://github.com/Tinche/aiofiles) - отличная библиотека для асинхронного
скачивания медиа-файлов из сети интернет. С ее помощью мы можем ускорить загрузку файлов и чтение
больших текстовых файлов практически в 10 раз. В этом разделе курса мы сравним синхронный и 
асихронный способы скачивания изображений и видео с нашего сайта-тренажера, чтобы наглядно
продемонстрировать разницу в скорости.

Aiofiles может работать не только с файлами, которые хранятся на вашем компьютере, прелесть работы
с этой библиотекой в том, что она умеет работать с response.content, а этот именно то что нужно для создания
асинхронной загрузки файлов.

Функция open() из aiofiles работает почти так же, как и привычная всем синхронная функция open(),
встроенная в Python. Мы можем использовать асихронную версию функцию open() как с менеджером
контекста with, так и без него.

Простой пример использования aiofiles
import aiofiles
import asyncio

C использованием менеджера контекста with

async with aiofiles.open('filename', mode='r') as f:
  contents = await f.read()
print(contents)

Результат
  'My file contents'

Без использования менеджера контекста with

file = await aiofiles.open('filename', mode='r')
contents = await file.read()
file.close()
print(contents)

При использовании асинхронной функции open() из библиотеки aiofiles необходимо закрывать файл
file.close(), в том случае если мы не использовали контекстный менеджер with. С применением
контекстного
