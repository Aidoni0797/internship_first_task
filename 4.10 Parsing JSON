4.10 Parsing JSON

Парсим JSON

Очень часто сервера отдают нужную нам информацию в JSON-формате, и наша задача - найти именно тот сетевой запрос, в котором есть JSON, и распарсить его.

Для начала нужно понять, как находить те самые запросы, в которых есть ответ в JSON. Посмотрим на российский маркетплейс wildberries.

Откройте https://www.wildberries.ru/ найдите этот запрос и скопируйте содержимое полч JSON на сайт https://jsonviewer.stack.hu/ для удобного отображения.
Мы увидим хорошо структурированную информацию. С такой информацией работать намного проще.

Давайте ближе посмотрим на ссылку, которую мы нашли на первом скриншоте. В ней мы видим параметр page=2, это как раз тот параметр, который нам понадобится
для прохода по всем страницам. На каждой итерации цикла мы будем получать JSON с карточками товаров. Можете убедиться в этом сами, изменяя вручную параметр
в page = 2. Вот ссылка https://www.wildberries.ru/catalog/elektronika/planshety?sort=popular&page=2, на момент создания этого степа там девять страниц.

Парсим JSON часть 2

Для следующего примера нам понадобиться jsonplaceholder - https://jsonplaceholder.typicode.com/posts,
тот сервис предоставляет JSON для разработчиков. У него есть 6 ресурсов -
/posts - https://jsonplaceholder.typicode.com/posts
/comments - 
/albums - 
/photos -
/todos -
/users - 

Давайте сделаем запрос на /posts и посмотрим на данные через jsonviewer. Мы увидим 100 постов, где мы
можем извлечь четыре поля: "userId", "id", "title", "body". Если мы хотим получить какой-либо
определенный элемент, мы должны указать его в квадратных скобках - ["title"].

Для того, чтобы получить все 'userId' and 'title', мы пройдемся по всем элементам в цикле for:

import requests

url = 'https://jsonplaceholder.typicode.com/posts'

response = requests.get(url=url).json()
for item in response:
  print(utem["userId"], item["title"])

>>>1 sunt aut facere repellat provident occaecati excepturi optio reprehenderit
    1 qui est esse
    1 ea molestias quasi exercitationem repellat qui ipsa sit au
    ...
    10 at nam consequtur ea labore ea harum
  
